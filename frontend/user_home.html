<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
<title>My Hub â€” SCHED-i</title>
<script src="https://cdn.tailwindcss.com"></script>
<!-- KEEPING THE FONT AS REQUESTED -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>

<style>
  :root{ 
    --text:#ffffff; 
    --muted:rgba(255, 255, 255, 0.7); 
    --accent:#e879f9; /* Fuchsia/Pink - Alpha Squad */
    --accent-secondary:#818cf8; /* Soft Indigo - Medicare */
    --success:#4ade80;
    --danger:#fb7185;
    --warning:#facc15;
    
    --glass: rgba(255, 255, 255, 0.05);
    --glass-hover: rgba(255, 255, 255, 0.1);
    --border: rgba(255, 255, 255, 0.15);
    --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
  }
  
  /* ANIMATED BACKGROUND */
  body { 
    background: linear-gradient(-45deg, #02010a, #1e0b36, #120429, #0f0518);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: var(--text); 
    font-family: 'Inter', sans-serif; 
    min-height: 100vh; 
    overflow-x: hidden;
  }

  @keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Keyframes for Staggered Calendar */
  @keyframes popIn {
    0% { opacity: 0; transform: scale(0.5); }
    70% { transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* Shimmer Effect for Hero */
  @keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
  }

  @keyframes slideInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes pulseSoft {
    0% { box-shadow: 0 0 0 0 rgba(232, 121, 249, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(232, 121, 249, 0); }
    100% { box-shadow: 0 0 0 0 rgba(232, 121, 249, 0); }
  }

  .container { max-width: 1000px; margin: 0 auto; padding: 32px 24px; }
  
  /* Header & Navigation */
  header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; animation: slideInUp 0.5s ease; }
  .logo { font-weight: 800; font-size: 24px; display:flex; gap:12px; align-items:center; color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
  .logo-img { width: 36px; height: 36px; border-radius: 8px; object-fit: contain; box-shadow: 0 0 15px rgba(232, 121, 249, 0.5); background: rgba(255,255,255,0.1); }
  
  .header-actions { display: flex; align-items: center; gap: 12px; }

  /* Emphasized Header Buttons with Interaction */
  .header-btn-primary {
      font-size: 13px; font-weight: 600; color: white;
      padding: 8px 16px; border-radius: 20px; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer; display: flex; align-items: center; gap: 6px;
      background: linear-gradient(135deg, rgba(232, 121, 249, 0.2), rgba(129, 140, 248, 0.2)); 
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  .header-btn-primary:hover { 
      background: linear-gradient(135deg, rgba(232, 121, 249, 0.4), rgba(129, 140, 248, 0.4)); 
      transform: translateY(-2px); box-shadow: 0 8px 20px rgba(232, 121, 249, 0.25); border-color: white;
  }
  .header-btn-primary:active { transform: scale(0.95); }

  .logout { 
    color: var(--muted); font-size: 14px; cursor: pointer; transition: 0.3s; 
    display:flex; align-items:center; gap:6px; padding: 8px 16px; border-radius: 20px;
    background: rgba(0,0,0,0.3); border: 1px solid transparent;
  }
  .logout:hover { color: white; background: rgba(255,255,255,0.1); border-color: var(--border); transform: scale(1.05); }

  /* Tab Navigation */
  .nav-tabs { 
    display: flex; gap: 8px; margin-bottom: 32px; padding: 6px; 
    background: rgba(0,0,0,0.2); border-radius: 30px; width: fit-content; 
    border: 1px solid var(--border); backdrop-filter: blur(10px); 
    animation: slideInUp 0.6s ease;
  }
  .tab-btn {
    background: transparent; border: none; color: var(--muted); 
    padding: 10px 24px; font-size: 14px; font-weight: 600; border-radius: 24px;
    cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    display: flex; align-items: center; gap: 8px; position: relative; overflow: hidden;
  }
  .tab-btn:hover { color: white; background: rgba(255,255,255,0.05); }
  .tab-btn.active { 
    background: rgba(255,255,255,0.15); color: white; 
    border: 1px solid rgba(255,255,255,0.2); 
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
    transform: scale(1.02);
  }
  .tab-btn.active i { color: var(--accent); }

  /* SECTIONS & ANIMATIONS */
  .section-content { display: none; }
  .section-content.active { display: block; }
  .animate-stagger-1 { animation: slideInUp 0.5s ease forwards; opacity: 0; animation-delay: 0.1s; }
  .animate-stagger-2 { animation: slideInUp 0.5s ease forwards; opacity: 0; animation-delay: 0.2s; }
  .animate-stagger-3 { animation: slideInUp 0.5s ease forwards; opacity: 0; animation-delay: 0.3s; }

  /* CARDS */
  .card { 
    background: var(--glass); 
    border: 1px solid var(--border); 
    border-radius: 20px; padding: 24px; margin-bottom: 24px; 
    backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
    box-shadow: var(--shadow);
    transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s ease;
  }
  .card:hover { transform: translateY(-4px); box-shadow: 0 15px 35px rgba(0,0,0,0.5); border-color: rgba(255,255,255,0.25); }
  
  .grid-2 { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 24px; align-items: start; }
  
  /* 1. OVERVIEW SECTION STYLES */
  .welcome-box {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 24px;
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    /* Prevent layout shift */
    min-height: 120px; 
    justify-content: center;
  }
  
  /* Fixed Layout Shift Problem: Added constraints */
  .welcome-title { 
      font-size: 42px; 
      font-weight: 800; 
      color: white; 
      letter-spacing: -1.5px; 
      text-shadow: 0 4px 12px rgba(0,0,0,0.3);
      line-height: 1.1;
      white-space: nowrap; 
      overflow: hidden; 
      text-overflow: ellipsis; 
      max-width: 100%;
  }
  .welcome-sub { 
      color: var(--accent); 
      font-size: 16px; 
      font-weight: 500; 
      display:flex; align-items: center; gap: 8px; 
  }

  /* Next Up Hero - With Shimmer Animation */
  .next-up-hero {
    background: linear-gradient(135deg, rgba(232, 121, 249, 0.1), rgba(129, 140, 248, 0.05));
    border: 1px solid rgba(232, 121, 249, 0.3);
    padding: 32px; border-radius: 24px; margin-bottom: 32px;
    backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    position: relative; overflow: hidden;
    display: flex; justify-content: space-between; align-items: center;
    animation: slideInUp 0.6s ease;
  }
  .next-up-hero::before {
      content: "";
      position: absolute; top: 0; left: -50%; width: 200%; height: 100%;
      background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.05) 50%, transparent 100%);
      transform: skewX(-20deg);
      animation: shimmer 6s infinite linear;
      pointer-events: none;
  }
  .next-up-hero:hover { border-color: var(--accent); }
  
  .hero-label { 
    font-size: 12px; text-transform: uppercase; letter-spacing: 2px; 
    color: var(--accent); font-weight: 700; margin-bottom: 12px; 
    display: flex; align-items: center; gap: 8px; 
    animation: pulseSoft 2s infinite; border-radius: 20px; width: fit-content;
  }
  .hero-time { font-family: 'Inter', sans-serif; font-size: 14px; color: rgba(255,255,255,0.8); display:flex; align-items:center; gap:8px; margin-top: 8px; }

  /* Workspaces */
  .team-item {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 20px; background: rgba(255,255,255,0.02); border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.05); cursor: pointer; transition: all 0.3s ease; margin-bottom: 16px;
  }
  .team-item:hover { 
    border-color: var(--accent); 
    background: linear-gradient(90deg, rgba(232, 121, 249, 0.1), rgba(255,255,255,0.02));
    transform: translateX(5px) scale(1.01); 
  }
  .team-icon { width: 48px; height: 48px; background: rgba(255,255,255,0.03); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; border: 1px solid var(--border); flex-shrink: 0; transition: transform 0.3s; }
  .team-item:hover .team-icon { transform: scale(1.1) rotate(5deg); background: rgba(255,255,255,0.1); border-color: var(--accent); }
  .team-info h4 { font-size: 16px; font-weight: 700; margin-bottom: 2px; color: white; }
  .team-info span { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }

  /* Action Buttons Grid */
  .action-grid { display: block; margin-top: 20px; }
  .action-btn-full {
    width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;
    padding: 16px; border-radius: 16px; border: 1px solid var(--border);
    background: rgba(255,255,255,0.02); color: var(--muted); 
    cursor: pointer; transition: 0.3s; font-size: 13px; font-weight: 600;
  }
  .action-btn-full:hover { background: rgba(255,255,255,0.08); border-color: white; color: white; transform: translateY(-2px); }
  .action-btn-full:active { transform: scale(0.98); }

  /* Activity List */
  .activity-list { display: flex; flex-direction: column; gap: 16px; }
  .activity-item { display: flex; gap: 16px; align-items: start; padding-bottom: 16px; border-bottom: 1px solid var(--border); transition: transform 0.2s; }
  .activity-item:hover { transform: translateX(4px); }
  .activity-item:last-child { border-bottom: none; padding-bottom: 0; }
  .act-icon { width: 32px; height: 32px; border-radius: 50%; background: rgba(232, 121, 249, 0.1); border: 1px solid rgba(232, 121, 249, 0.3); display: flex; align-items: center; justify-content: center; color: var(--accent); flex-shrink: 0; }
  .act-content { font-size: 13px; color: var(--muted); line-height: 1.4; }
  .act-content b { color: white; font-weight: 600; }
  .act-time { font-size: 11px; color: rgba(255,255,255,0.4); margin-top: 4px; }

  /* 2. CALENDAR SECTION */
  .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
  .cal-day-name { text-align: center; color: var(--muted); font-size: 12px; font-weight: 600; padding-bottom: 8px; }
  .cal-date { 
    height: 54px; border-radius: 12px; background: rgba(255,255,255,0.03); 
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    font-size: 14px; color: var(--muted); cursor: pointer; transition: all 0.2s;
    border: 1px solid transparent; position: relative;
    /* Base style for animation */
    opacity: 0; 
    transform: scale(0.8);
  }
  
  /* Animation Class applied via JS */
  .cal-date.animate-in {
      animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }

  .cal-date:hover { background: rgba(255,255,255,0.1); color: white; border-color: var(--accent); transform: scale(1.05); z-index: 2; }
  
  /* NEW CALENDAR STYLES FOR HIGHLIGHTING */
  .cal-date.today {
      border: 1px solid white;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
      font-weight: 700; color: white;
  }
  .cal-date.event-alpha {
      background: rgba(232, 121, 249, 0.25);
      border: 1px solid rgba(232, 121, 249, 0.5);
      color: white;
  }
  .cal-date.event-medicare {
      background: rgba(129, 140, 248, 0.25);
      border: 1px solid rgba(129, 140, 248, 0.5);
      color: white;
  }
  .cal-date.event-holiday {
      background: rgba(74, 222, 128, 0.15);
      border: 1px solid rgba(74, 222, 128, 0.4);
      color: white;
  }

  .cal-dots { display: flex; gap: 3px; margin-top: 4px; }
  .dot { width: 4px; height: 4px; border-radius: 50%; }

  /* 3. PROFILE SECTION */
  .profile-header { display: flex; align-items: flex-start; gap: 24px; margin-bottom: 32px; }
  .profile-avatar-lg { 
    width: 100px; height: 100px; border-radius: 50%; 
    background: linear-gradient(135deg, #4c1d95, #831843); 
    border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; 
    font-size: 32px; color: var(--muted); overflow: hidden; cursor: pointer; position: relative; 
    box-shadow: 0 8px 24px rgba(0,0,0,0.3); flex-shrink: 0; 
    transition: transform 0.3s;
  }
  .profile-avatar-lg:hover { transform: scale(1.05); border-color: var(--accent); }
  .profile-avatar-lg:hover::after { content:'Edit'; position: absolute; inset:0; background:rgba(0,0,0,0.6); font-size:12px; display:flex; align-items:center; justify-content:center; color:white; font-weight: 600; animation: fadeIn 0.2s; }
  
  .profile-info-edit { flex: 1; display: flex; flex-direction: column; gap: 12px; }
  .profile-field-group { display: flex; flex-direction: column; gap: 4px; }
  .profile-label { font-size: 11px; color: var(--accent); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 700; margin-bottom: 2px; }
  
  .profile-input { 
      background: rgba(0,0,0,0.2); border: 1px solid var(--border); 
      border-radius: 8px; padding: 10px 14px; color: white; font-size: 14px; width: 100%;
      transition: all 0.2s;
  }
  .profile-input:focus { outline: none; border-color: var(--accent); background: rgba(0,0,0,0.4); box-shadow: 0 0 10px rgba(232,121,249,0.2); transform: translateY(-1px); }
  .profile-input.title { font-size: 24px; font-weight: 800; padding: 4px 0; background: transparent; border: none; border-bottom: 1px solid transparent; border-radius: 0; }
  .profile-input.title:focus { border-bottom-color: var(--accent); box-shadow: none; transform: none; }

  /* Status Badge */
  .status-btn {
      font-size:11px; padding:6px 14px; border-radius:20px; 
      border:1px solid transparent; font-weight:600; cursor: pointer; transition: 0.2s;
      display: inline-flex; align-items: center; gap: 6px; width: fit-content;
  }
  .status-btn.active { background:rgba(232, 121, 249, 0.15); color:var(--accent); border-color:rgba(232, 121, 249, 0.3); }
  .status-btn.busy { background:rgba(251,113,133,0.15); color:var(--danger); border-color:rgba(251,113,133,0.3); }
  .status-btn.offline { background:rgba(148,163,184,0.15); color:var(--muted); border-color:rgba(148,163,184,0.3); }
  
  /* FIXED: Availability Grid & Green Gradient Add Button */
  .avail-grid { display: flex; flex-direction: column; gap: 12px; }
  .avail-row { 
      display: flex; justify-content: space-between; align-items: flex-start; 
      padding: 16px; background: rgba(255,255,255,0.03); 
      border-radius: 12px; border: 1px solid var(--border); transition: 0.2s;
      flex-wrap: wrap; /* Important for mobile */
  }
  .avail-row:hover { border-color: var(--accent); background: rgba(255,255,255,0.05); }
  .avail-day { font-weight: 700; font-size: 14px; color: white; width: 60px; padding-top: 10px; }
  
  .avail-right-col { flex: 1; display: flex; flex-direction: column; gap: 8px; min-width: 200px; }
  
  .interval-list { display: flex; flex-direction: column; gap: 8px; width: 100%; }
  .interval-group { display: flex; align-items: center; gap: 8px; width: 100%; animation: fadeIn 0.3s ease; }
  
  .avail-input { 
      background: rgba(0,0,0,0.4); border: 1px solid var(--border); 
      color: white; padding: 8px; border-radius: 8px; 
      font-family: monospace; font-size: 13px; text-align: center;
      color-scheme: dark; flex: 1;
  }
  .avail-input:focus { border-color: var(--accent); outline: none; }
  
  .btn-icon-small { 
    width: 32px; height: 32px; border-radius: 8px; 
    display: flex; align-items: center; justify-content: center; 
    background: rgba(255,255,255,0.05); color: var(--muted); cursor: pointer; 
    border: 1px solid transparent; transition: 0.2s; flex-shrink: 0;
  }
  .btn-icon-small:hover { transform: scale(1.1); background: rgba(255,255,255,0.1); color: white; }
  
  /* Green Gradient Add Shift Button */
  .btn-add-row { 
      font-size: 11px; font-weight: 700; color: #fff; cursor: pointer;
      display: flex; align-items: center; gap: 4px; margin-top: 8px; width: fit-content;
      padding: 6px 12px; border-radius: 20px; transition: 0.2s;
      background: linear-gradient(135deg, #22c55e, #16a34a); /* Green gradient */
      box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
  }
  .btn-add-row:hover { transform: translateY(-1px); box-shadow: 0 6px 15px rgba(34, 197, 94, 0.4); }
  .btn-add-row:active { transform: scale(0.98); }
  
  .btn-remove { color: var(--danger); }
  .btn-remove:hover { background: rgba(251, 113, 133, 0.2); }

  /* Shared Button Style for Save/View actions */
  .btn-primary-action {
      background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
      color: white; font-weight: 600; font-size: 14px;
      padding: 10px 20px; border-radius: 12px;
      border: none; cursor: pointer; display: flex; align-items: center; gap: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: 0.2s;
      width: fit-content;
  }
  .btn-primary-action:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(232, 121, 249, 0.4);
  }
  .btn-primary-action:active { transform: scale(0.97); }

  /* UPDATED LOADING ANIMATION: MODERN FILL BOX */
  #loadingOverlay {
      position: fixed; inset: 0; background: #02010a; z-index: 9999;
      display: none; align-items: center; justify-content: center; flex-direction: column;
  }
  
  .loader-box-container {
      width: 180px; height: 6px; 
      background: rgba(255,255,255,0.1); border-radius: 10px;
      overflow: hidden; position: relative; margin-bottom: 20px;
  }
  
  .loader-box-fill {
      height: 100%; width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
      animation: fillBox 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(232, 121, 249, 0.5);
  }

  /* TOAST NOTIFICATION */
  #toast {
    position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(50px);
    background: rgba(20, 20, 30, 0.95); border: 1px solid var(--accent);
    color: white; padding: 12px 24px; border-radius: 30px; font-size: 14px; font-weight: 600;
    opacity: 0; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; z-index: 10000;
    display: flex; align-items: center; gap: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }
  #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

  @keyframes fillBox {
      0% { width: 0%; }
      50% { width: 70%; }
      100% { width: 100%; }
  }
  
  /* RESPONSIVE FIXES */
  @media(max-width: 900px) { 
    .grid-2 { grid-template-columns: 1fr; } 
  }

  @media(max-width: 600px) {
    .container { padding: 16px; }
    .nav-tabs { width: 100%; overflow-x: auto; justify-content: flex-start; scroll-behavior: smooth; }
    .nav-tabs::-webkit-scrollbar { display: none; }
    .tab-btn { white-space: nowrap; padding: 10px 16px; }
    
    .next-up-hero { flex-direction: column; align-items: flex-start; gap: 16px; padding: 24px; }
    .next-up-hero > div:last-child { width: 100%; }
    .next-up-hero .btn { width: 100%; justify-content: center; }
    
    .profile-header { flex-direction: column; align-items: center; text-align: center; }
    .profile-field-group input { text-align: center; }
    
    .avail-row { flex-direction: column; gap: 8px; }
    .avail-day { width: 100%; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 8px; padding-bottom: 4px; padding-top: 0; }
    
    .header-actions { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); padding: 12px; z-index: 100; justify-content: center; border-top: 1px solid var(--border); }
    .header-btn-primary { font-size: 12px; padding: 6px 12px; }
    .logout { display: none; } /* Hide Logout on mobile if space constraint */
    .container { padding-bottom: 80px; } /* Space for fixed footer */
    .btn-primary-action { width: 100%; justify-content: center; }
  }
</style>
</head>
<body>

<!-- LOADING ANIMATION -->
<div id="loadingOverlay">
    <div class="loader-box-container">
        <div class="loader-box-fill"></div>
    </div>
    <div style="color:white; font-weight:600; font-size:12px; letter-spacing:2px; text-transform:uppercase; opacity:0.8;">Navigating...</div>
</div>

<!-- TOAST -->
<div id="toast"><i data-lucide="check-circle" width="18" style="color:var(--success)"></i> <span id="toastMsg">Action Successful</span></div>

<div class="container">
    <header>
        <div class="logo">
           <img src="LOGO.png" alt="Logo" class="logo-img">
           SCHED-i
        </div>
        
        <div class="header-actions">
            <!-- EMPHASIZED BUTTONS -->
            <button class="header-btn-primary" onclick="navigateWithAnimation('create_team.html')">
                <i data-lucide="plus-circle" width="16"></i> <span>Create Team</span>
            </button>
            <button class="header-btn-primary" onclick="navigateWithAnimation('join_team.html')">
                <i data-lucide="users" width="16"></i> <span>Join Team</span>
            </button>
            <div class="logout" onclick="window.location.href='login.html'">
               <i data-lucide="log-out" width="16"></i> <span class="hidden sm:inline">Sign Out</span>
            </div>
        </div>
    </header>

    <!-- TAB NAVIGATION -->
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('overview', this)">
            <i data-lucide="layout-dashboard" width="16"></i> Overview
        </button>
        <button class="tab-btn" onclick="switchTab('calendar', this)">
            <i data-lucide="calendar" width="16"></i> Calendar
        </button>
        <button class="tab-btn" onclick="switchTab('profile', this)">
            <i data-lucide="user" width="16"></i> Profile
        </button>
    </div>

    <!-- 1. OVERVIEW SECTION -->
    <div id="overview" class="section-content active">
        
        <!-- NEW WELCOME BOX -->
        <div class="welcome-box animate-stagger-1">
            <h1 class="welcome-title" id="welcomeMsg">Welcome back</h1>
            <p class="welcome-sub">
              <i data-lucide="calendar-check" width="16"></i>
              <span id="currentDateDisplay"></span>
            </p>
        </div>

        <!-- Hero: Next Meeting -->
        <div class="next-up-hero">
            <div>
                <div class="hero-label">
                    <i data-lucide="zap" width="14" fill="var(--accent)"></i> Happening Next
                </div>
                <div style="font-size: 28px; font-weight: 800; color: white; margin-bottom: 8px; letter-spacing: -0.5px; line-height: 1.2;">
                  Client Demo Review
                </div>
                <div class="hero-time">
                    <span style="background:rgba(232, 121, 249, 0.15); color:var(--accent); padding:4px 10px; border-radius:8px; font-weight:700; font-size:13px; border:1px solid rgba(232, 121, 249, 0.3);">
                        Dec 10 &bull; 2:00 PM - 3:30 PM
                    </span>
                    <span style="color:rgba(255,255,255,0.5);">|</span>
                    <span style="display:flex; align-items:center; gap:4px;"><i data-lucide="map-pin" width="14"></i> Alpha Squad Workspace</span>
                </div>
            </div>
            <div style="text-align:right;">
                <!-- Lead to date details -->
                <button class="btn-primary-action" onclick="goToCalendar('2025-12-10')">View Details <i data-lucide="arrow-right" width="16"></i></button>
            </div>
        </div>

        <div class="grid-2">
            <!-- Left: Workspaces & Actions -->
            <div class="animate-stagger-2">
                <div class="section-title"><i data-lucide="briefcase" width="18" style="color:var(--accent);"></i> My Workspaces</div>
                
                <div class="team-item" onclick="navigateWithAnimation('dashboard.html?role=Admin')">
                    <div class="team-left">
                        <div class="team-icon" style="color:#e879f9;">ðŸš€</div>
                        <div class="team-info">
                            <h4>Alpha Squad</h4>
                            <span>Admin / Owner</span>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" width="20" color="var(--muted)"></i>
                </div>

                <div class="team-item" onclick="navigateWithAnimation('member_dashboard.html')">
                    <div class="team-left">
                        <div class="team-icon" style="color:#818cf8;">ðŸ’Š</div>
                        <div class="team-info">
                            <h4>MediCare Team</h4>
                            <span>Member</span>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" width="20" color="var(--muted)"></i>
                </div>

                <div class="section-title" style="margin-top:24px;"><i data-lucide="rocket" width="18" style="color:white;"></i> Quick Actions</div>
                
                <div class="action-grid">
                    <div class="action-btn-full" onclick="goToProfile()">
                        <i data-lucide="clock" width="16" style="color:var(--accent-secondary);"></i> Edit My Availability
                    </div>
                </div>
            </div>

            <!-- Right: Activity & Notes -->
            <div class="animate-stagger-3">
                <div class="section-title"><i data-lucide="activity" width="18" style="color:var(--accent);"></i> Updates</div>
                
                <div class="card" style="padding: 20px;">
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="act-icon"><i data-lucide="users" width="14"></i></div>
                            <div>
                                <div class="act-content"><b>Sarah</b> joined Alpha Squad.</div>
                                <div class="act-time">10 mins ago</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="act-icon"><i data-lucide="calendar" width="14"></i></div>
                            <div>
                                <div class="act-content">Schedule conflict resolved.</div>
                                <div class="act-time">2 hours ago</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-title"><i data-lucide="sticky-note" width="18" style="color:var(--muted);"></i> Quick Notes</div>
                <div class="card" style="padding:16px;">
                    <div style="display:flex; gap:8px; margin-bottom:12px;">
                        <input type="text" id="noteInput" placeholder="Add reminder..." style="background:rgba(0,0,0,0.3); border:1px solid var(--border); padding:8px; border-radius:8px; width:100%; color:white; font-size:13px;">
                        <button onclick="addNote()" style="background:var(--accent); color:black; border:none; border-radius:8px; width:36px; cursor:pointer; display:flex; align-items:center; justify-content:center;"><i data-lucide="plus" width="16"></i></button>
                    </div>
                    <div id="noteList" style="display:flex; flex-direction:column; gap:8px;">
                        <div style="font-size:13px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px; color:var(--muted); display:flex; justify-content:space-between; align-items:center;">
                            <span>Submit Q4 Report</span> <i data-lucide="x" width="12" style="cursor:pointer"></i>
                        </div>
                        <div style="font-size:13px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px; color:var(--muted); display:flex; justify-content:space-between; align-items:center;">
                            <span>Prepare Materials</span> <i data-lucide="x" width="12" style="cursor:pointer"></i>
                        </div>
                        <div style="font-size:13px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px; color:var(--muted); display:flex; justify-content:space-between; align-items:center;">
                            <span>Pass Requirements</span> <i data-lucide="x" width="12" style="cursor:pointer"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. CALENDAR SECTION -->
    <div id="calendar" class="section-content">
        <div class="card animate-stagger-1">
            <div class="calendar-header">
                <div style="font-size: 20px; font-weight: 800; color: white;" id="calMonthYear"></div>
                <div style="display:flex; gap:8px;">
                    <button class="btn btn-outline" style="padding: 6px 10px;" onclick="changeMonth(-1)"><i data-lucide="chevron-left" width="16"></i></button>
                    <button class="btn btn-outline" style="padding: 6px 10px;" onclick="changeMonth(1)"><i data-lucide="chevron-right" width="16"></i></button>
                </div>
             </div>
             
             <!-- Days Header -->
             <div class="calendar-grid" style="margin-bottom:8px;">
                <div class="cal-day-name">Sun</div><div class="cal-day-name">Mon</div><div class="cal-day-name">Tue</div><div class="cal-day-name">Wed</div><div class="cal-day-name">Thu</div><div class="cal-day-name">Fri</div><div class="cal-day-name">Sat</div>
             </div>

             <div class="calendar-grid" id="calendarGrid">
                <!-- JS Injected -->
             </div>
             
             <!-- Legend -->
             <div style="display:flex; gap:16px; justify-content:center; margin-top:16px; flex-wrap:wrap;">
                <div style="display:flex; align-items:center; gap:6px; font-size:11px; color:var(--muted);"><span style="width:10px; height:10px; background:rgba(232, 121, 249, 0.4); border-radius:2px;"></span> Alpha Squad</div>
                <div style="display:flex; align-items:center; gap:6px; font-size:11px; color:var(--muted);"><span style="width:10px; height:10px; background:rgba(129, 140, 248, 0.4); border-radius:2px;"></span> Medicare</div>
                <div style="display:flex; align-items:center; gap:6px; font-size:11px; color:var(--muted);"><span style="width:10px; height:10px; background:rgba(74, 222, 128, 0.4); border-radius:2px;"></span> Holiday</div>
             </div>
             
             <div id="dateDetails" style="margin-top: 24px; padding-top:24px; border-top:1px solid var(--border); display:none; animation: slideInUp 0.3s ease;">
                 <h4 style="color:white; font-size:14px; margin-bottom:16px; font-weight:600; display:flex; align-items:center; gap:8px;">
                    <i data-lucide="clock" width="14" color="var(--accent)"></i> Events on <span id="selectedDateText" style="color:var(--accent);"></span>
                </h4>
                 <div id="eventsContainer"></div>
             </div>
        </div>
    </div>

    <!-- 3. PROFILE SECTION -->
    <div id="profile" class="section-content">
        
        <!-- Profile Identity & Customization -->
        <div class="card animate-stagger-1">
            <div class="profile-header">
                <div class="profile-avatar-lg" onclick="document.getElementById('fileInput').click()">
                    <img id="avatarImg" src="" style="display:none; width:100%; height:100%; object-fit:cover;">
                    <span id="avatarInitials">U</span>
                </div>
                <div class="profile-info-edit">
                    <!-- Name & Title -->
                    <div class="profile-field-group">
                        <input type="text" id="userName" class="profile-input title" value="User Name" placeholder="Your Name" oninput="updateGreetingLive(this.value)">
                        <input type="text" id="userTitle" class="profile-input" placeholder="Job Title (e.g. Senior Developer)" style="background:transparent; border:none; padding:0; color:var(--muted); font-size:13px; text-align:inherit;">
                    </div>
                    
                    <!-- Pronouns -->
                    <div style="margin-top:8px; display:flex; gap:12px;">
                        <input type="text" id="userPronouns" class="profile-input" placeholder="Pronouns (e.g. they/them)" style="width: 150px; font-size:12px; padding:6px 10px;">
                    </div>
                    
                    <!-- Details Grid -->
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; width:100%; margin-top:12px;">
                        <div>
                            <label class="profile-label">Email</label>
                            <input type="text" class="profile-input" value="user@example.com" readonly style="opacity:0.7; cursor:not-allowed;">
                        </div>
                        <div>
                            <label class="profile-label">Location</label>
                            <input type="text" id="userLocation" class="profile-input" placeholder="e.g. New York, USA">
                        </div>
                    </div>

                    <!-- Status -->
                    <div style="margin-top:12px;">
                        <label class="profile-label" style="display:block; margin-bottom:4px;">Current Status</label>
                        <button id="statusBtn" class="status-btn active" onclick="toggleStatus()">
                            <span class="dot" style="background:currentColor; width:6px; height:6px;"></span> Active
                        </button>
                    </div>
                </div>
            </div>
            
            <div style="padding-top:16px; border-top:1px solid var(--border);">
                <label class="profile-label">Bio / About</label>
                <textarea id="userBio" class="profile-input" rows="2" placeholder="Share a bit about yourself..." style="resize:none; margin-top:4px;"></textarea>
            </div>

            <!-- FUNCTIONAL SAVE BUTTON -->
            <div style="margin-top:20px; display:flex; justify-content:flex-end;">
                <button class="btn-primary-action" onclick="saveProfile()">
                    <i data-lucide="save" width="16"></i> Save Profile
                </button>
            </div>

            <input type="file" id="fileInput" hidden accept="image/*" onchange="updateAvatar(this)">
        </div>

        <!-- SPLIT-SHIFT AVAILABILITY -->
        <div class="section-title animate-stagger-2"><i data-lucide="clock" width="18" style="color:#ffffff;"></i> Weekly Availability (Split Shifts)</div>
        <div class="card animate-stagger-2" id="availContainerCard">
            <div style="margin-bottom:16px; font-size:13px; color:var(--muted);">
                Set your recurring availability. Times must be sequential.
            </div>
            <div class="avail-grid" id="availContainer">
                <!-- JS Generated -->
            </div>
            <!-- FUNCTIONAL SAVE BUTTON -->
            <button class="btn-primary-action" style="margin-top:20px; width:100%; justify-content:center;" onclick="saveAvailability()">Save Schedule</button>
        </div>

    </div>

</div>

<script>
    lucide.createIcons();

    function showToast(msg) {
        const t = document.getElementById('toast');
        document.getElementById('toastMsg').innerText = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    // --- Loading & Navigation Animation ---
    function navigateWithAnimation(targetUrl) {
        const overlay = document.getElementById('loadingOverlay');
        const fill = document.querySelector('.loader-box-fill');
        
        // Reset animation
        fill.style.animation = 'none';
        fill.offsetHeight; /* trigger reflow */
        fill.style.animation = 'fillBox 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards';
        
        overlay.style.display = 'flex';
        
        // Actually navigate after delay
        setTimeout(() => {
            if(targetUrl.includes('.html')) {
                // In a real environment, this line handles navigation:
                window.location.href = targetUrl;
            }
        }, 1200);
    }

    // --- Tab Switching ---
    function switchTab(tabId, btn) {
        document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        if(btn) btn.classList.add('active');
    }

    function goToCalendar(targetDateStr) {
        const calBtn = document.querySelectorAll('.tab-btn')[1]; 
        switchTab('calendar', calBtn);
        
        if(targetDateStr) {
            const dateObj = new Date(targetDateStr);
            currYear = dateObj.getFullYear();
            currMonth = dateObj.getMonth(); // 0-indexed
            
            // Render specific month
            renderCalendar();
            
            // Trigger detail view for the specific day
            setTimeout(() => {
                const day = dateObj.getDate(); 
                showEventDetails(targetDateStr, day);
                // Highlight the day visually
                document.querySelectorAll('.cal-date').forEach(el => {
                     // Check if this element represents the day. 
                     // InnerHTML contains span with number.
                     if(el.querySelector('span').innerText == day) {
                         el.style.borderColor = 'white';
                         el.style.boxShadow = '0 0 15px rgba(255,255,255,0.4)';
                     }
                });
            }, 100);
        } else {
            // Reset to today
            currMonth = new Date().getMonth();
            currYear = new Date().getFullYear();
            renderCalendar();
        }
    }

    function goToProfile() {
        const profBtn = document.querySelectorAll('.tab-btn')[2];
        switchTab('profile', profBtn);
        setTimeout(() => {
            document.getElementById('availContainerCard').scrollIntoView({behavior: 'smooth'});
        }, 100);
    }

    // --- Date Display ---
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('currentDateDisplay').innerText = new Date().toLocaleDateString('en-US', options);

    // --- Profile Logic (With Save) ---
    // Load Saved Data
    const savedProfile = JSON.parse(localStorage.getItem('sa_profile') || '{}');
    if(savedProfile.name) {
        document.getElementById('userName').value = savedProfile.name;
        document.getElementById('avatarInitials').innerText = savedProfile.name.charAt(0).toUpperCase();
        updateGreeting(savedProfile.name);
    } else {
        updateGreeting('User');
    }
    if(savedProfile.title) document.getElementById('userTitle').value = savedProfile.title;
    if(savedProfile.pronouns) document.getElementById('userPronouns').value = savedProfile.pronouns;
    if(savedProfile.location) document.getElementById('userLocation').value = savedProfile.location;
    if(savedProfile.bio) document.getElementById('userBio').value = savedProfile.bio;

    function saveProfile() {
        const profileData = {
            name: document.getElementById('userName').value,
            title: document.getElementById('userTitle').value,
            pronouns: document.getElementById('userPronouns').value,
            location: document.getElementById('userLocation').value,
            bio: document.getElementById('userBio').value
        };
        localStorage.setItem('sa_profile', JSON.stringify(profileData));
        localStorage.setItem('sa_username', profileData.name); 
        
        updateGreeting(profileData.name);
        showToast('Profile Saved Successfully');
    }

    // LIVE TYPING UPDATE
    function updateGreetingLive(val) {
        if(!val) val = "User";
        updateGreeting(val);
        document.getElementById('avatarInitials').innerText = val.charAt(0).toUpperCase();
    }

    function updateGreeting(name) {
        const hour = new Date().getHours();
        let timeGreet = 'Good morning';
        if(hour >= 12) timeGreet = 'Good afternoon';
        if(hour >= 18) timeGreet = 'Good evening';
        // Handle name
        const display = name ? name.split(' ')[0] : 'User';
        document.getElementById('welcomeMsg').innerText = `${timeGreet}, ${display}`;
        // Initials logic if not called live
        if(name && !document.getElementById('avatarInitials').innerText) {
             document.getElementById('avatarInitials').innerText = name.charAt(0).toUpperCase();
        }
    }

    function updateAvatar(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('avatarImg').src = e.target.result;
                document.getElementById('avatarImg').style.display = 'block';
                document.getElementById('avatarInitials').style.display = 'none';
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    // --- Status Toggle Logic ---
    const statuses = ['active', 'busy', 'offline'];
    let currentStatusIdx = 0;
    function toggleStatus() {
        currentStatusIdx = (currentStatusIdx + 1) % statuses.length;
        const s = statuses[currentStatusIdx];
        const btn = document.getElementById('statusBtn');
        btn.className = 'status-btn';
        if(s === 'active') {
            btn.classList.add('active');
            btn.innerHTML = `<span class="dot" style="background:currentColor; width:6px; height:6px;"></span> Active`;
        } else if (s === 'busy') {
            btn.classList.add('busy');
            btn.innerHTML = `<span class="dot" style="background:currentColor; width:6px; height:6px;"></span> Busy`;
        } else {
            btn.classList.add('offline');
            btn.innerHTML = `<span class="dot" style="background:currentColor; width:6px; height:6px;"></span> Offline`;
        }
    }

    // --- Quick Notes ---
    function addNote() {
        const val = document.getElementById('noteInput').value;
        if(!val) return;
        const div = document.createElement('div');
        div.style.cssText = "font-size:13px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; animation: fadeIn 0.3s ease;";
        div.innerHTML = `<span>${val}</span> <i data-lucide="x" width="12" style="cursor:pointer" onclick="this.parentElement.remove()"></i>`;
        document.getElementById('noteList').prepend(div);
        document.getElementById('noteInput').value = '';
        lucide.createIcons();
    }

    // --- FIXED SPLIT SHIFT AVAILABILITY LOGIC ---
    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
    const availContainer = document.getElementById('availContainer');
    
    // Load Availability from local or default
    days.forEach(day => {
        const dayShort = day.substring(0,3);
        const div = document.createElement('div');
        div.className = 'avail-row';
        div.innerHTML = `
            <div class="avail-day">${dayShort}</div>
            <div class="avail-right-col">
                <div class="interval-list" id="intervals-${dayShort}">
                    <div class="interval-group">
                        <input type="time" class="avail-input" value="09:00">
                        <span style="color:var(--muted)">-</span>
                        <input type="time" class="avail-input" value="17:00">
                    </div>
                </div>
                <!-- ADD SHIFT BUTTON (GREEN GRADIENT) -->
                <div class="btn-add-row" onclick="addInterval('${dayShort}')">
                    <i data-lucide="plus" width="12"></i> Add Shift
                </div>
            </div>
        `;
        availContainer.appendChild(div);
    });

    window.addInterval = function(dayShort) {
        const container = document.getElementById(`intervals-${dayShort}`);
        const group = document.createElement('div');
        group.className = 'interval-group';
        group.innerHTML = `
            <input type="time" class="avail-input">
            <span style="color:var(--muted)">-</span>
            <input type="time" class="avail-input">
            <button class="btn-icon-small btn-remove" onclick="this.parentElement.remove()"><i data-lucide="trash-2" width="14"></i></button>
        `;
        container.appendChild(group);
        lucide.createIcons();
    }
    
    // Smart Save Logic for Availability
    function saveAvailability() {
        const inputs = document.querySelectorAll('.avail-input');
        let isValid = true;
        inputs.forEach(inp => {
            if(!inp.value) isValid = false;
        });

        if(!isValid) {
            alert("Please fill in all time slots.");
            return;
        }
        
        showToast('Schedule Updated!');
        localStorage.setItem('sa_avail_updated', Date.now());
    }

    // --- Full Calendar Logic & Mock Events ---
    let currMonth = new Date().getMonth();
    let currYear = new Date().getFullYear();

    const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    
    // UPDATED: Events DB with Team Types
    // Types: 'alpha', 'medicare', 'holiday'
    const EVENTS_DB = {
        // --- Week 1: Early December ---
    // ================= 2025 EVENTS =================

    // --- Q1 - Q3 2025 (Single events) ---
    "2025-01-01": [{title: 'New Year Day', time: 'All Day', location: '-', color: 'green', desc: 'Public Holiday', team: 'holiday'}],
    "2025-02-14": [{title: 'Valentine Lunch', time: '12:00 PM', location: 'Cafeteria', color: 'yellow', desc: 'Social', team: 'social'}],
    "2025-03-15": [{title: 'Medicare Audit', time: '02:00 PM', location: 'Room 202', color: 'blue', desc: 'Compliance check', team: 'medicare'}],
    "2025-04-03": [{title: 'ðŸŽ‚ User Birthday', time: 'All Day', location: '-', color: 'gold', desc: 'Happy Birthday!', team: 'personal'}],
    "2025-05-20": [{title: 'Alpha Design Sprint', time: '01:00 PM', location: 'Lab', color: 'purple', desc: 'UI Refresh', team: 'alpha'}],
    "2025-07-04": [{title: 'Independence Day', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2025-08-15": [{title: 'Summer Outing', time: 'All Day', location: 'Beach', color: 'yellow', desc: 'Team Building', team: 'social'}],
    "2025-09-08": [{title: 'Alpha Code Freeze', time: '05:00 PM', location: 'Server Room', color: 'purple', desc: 'v1.5 Prep', team: 'alpha'}],
    "2025-10-31": [{title: 'Halloween', time: '04:00 PM', location: 'Lobby', color: 'yellow', desc: 'Costume Party', team: 'social'}],
    "2025-11-27": [{title: 'Thanksgiving', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    
    // --- DECEMBER 2025 ---
    "2025-12-05": [{title: 'Team Sync', time: '10:00 AM - 11:00 AM', location: 'Zoom', color: 'blue', desc: 'Sync up', team: 'medicare'}],
    "2025-12-10": [{title: 'Client Demo Review', time: '02:00 PM - 03:30 PM', location: 'Alpha', color: 'purple', desc: 'Reviewing progress', team: 'alpha'}],
    "2025-12-13": [{title: 'Reading', time: '10:00 AM - 11:00 AM', location: 'Zoom', color: 'blue', desc: 'Sync up', team: 'medicare'}],
    "2025-12-24": [{title: 'Christmas Eve', time: 'Half Day', location: '-', color: 'green', desc: 'Office closes 12pm', team: 'holiday'}],
    
    // *** STACKED DATE: December 25, 2025 ***
    "2025-12-25": [
        {title: 'Christmas Day', time: 'All Day', location: '-', color: 'green', desc: 'Public Holiday', team: 'holiday'}],
     "2025-12-16": [   {title: 'Urgent Server Patch', time: '08:00 AM - 09:00 AM', location: 'Remote', color: 'purple', desc: 'Alpha Critical Fix', team: 'alpha'}],
     "2025-12-15": [   {title: 'Medicare Auto-Scale', time: '10:00 PM - 11:00 PM', location: 'Server', color: 'blue', desc: 'Automated Job', team: 'medicare'}
    ],

    "2025-12-31": [{title: 'New Year Eve', time: 'Party @ 8PM', location: 'Rooftop', color: 'purple', desc: 'Countdown party', team: 'alpha'}],


    // ================= 2026 EVENTS =================

    // --- Q1 - Q3 2026 (Single events) ---
    "2026-01-01": [{title: 'New Year Day', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-02-14": [{title: 'Valentineâ€™s', time: 'All Day', location: '-', color: 'green', desc: 'Observance', team: 'holiday'}],
    "2026-04-03": [{title: 'ðŸŽ‚ User Birthday', time: 'All Day', location: '-', color: 'gold', desc: 'Happy Birthday!', team: 'personal'}],
    "2026-05-15": [{title: 'Alpha Architecture', time: '02:00 PM', location: 'Room 304', color: 'purple', desc: 'System Review', team: 'alpha'}],
    "2026-06-20": [{title: 'Medicare Training', time: '10:00 AM', location: 'Zoom', color: 'blue', desc: 'Staff Training', team: 'medicare'}],
    "2026-07-04": [{title: 'Independence Day', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-09-07": [{title: 'Labor Day', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-11-26": [{title: 'Thanksgiving', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-12-15": [ {title: 'Database Backup', time: '11:00 PM', location: 'Cloud', color: 'blue', desc: 'Yearly Dump', team: 'medicare'}  ],
    "2026-12-24": [{title: 'Christmas Eve', time: 'Half Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-12-25": [ {title: 'Christmas Day', time: 'All Day', location: '-', color: 'green', desc: 'Holiday', team: 'holiday'}],
    "2026-12-17": [ {title: 'On-Call Rotation', time: '09:00 AM - 05:00 PM', location: 'Remote', color: 'purple', desc: 'Alpha Support', team: 'alpha'}],
    "2026-12-31": [{title: 'New Year Eve', time: 'Party @ 8PM', location: 'Club', color: 'purple', desc: 'Alpha Party', team: 'alpha'}]
};

    function renderCalendar() {
        const grid = document.getElementById('calendarGrid');
        const monthYearEl = document.getElementById('calMonthYear');
        
        grid.innerHTML = '';
        monthYearEl.innerText = `${months[currMonth]} ${currYear}`;
        
        let firstDay = new Date(currYear, currMonth, 1).getDay(); // 0 = Sun
        let daysInMonth = new Date(currYear, currMonth + 1, 0).getDate();

        // Empty cells
        for(let i=0; i<firstDay; i++) {
            grid.appendChild(document.createElement('div'));
        }

        let today = new Date();
        
        for(let i=1; i<=daysInMonth; i++) {
            let el = document.createElement('div');
            el.className = 'cal-date';
            el.innerHTML = `<span>${i}</span>`;
            
            // Stagger Animation Delay based on index
            el.style.animationDelay = `${i * 0.03}s`;
            el.classList.add('animate-in'); // Add animation class
            
            // Highlight today (December 10, 2025 for demo purposes if contextually required, otherwise system date)
            if(i === 10 && currMonth === 11 && currYear === 2025) {
                el.classList.add('today');
            } else if (i === today.getDate() && currMonth === today.getMonth() && currYear === today.getFullYear()) {
                 el.classList.add('today');
            }

            // Check events
            let m = currMonth + 1;
            let d = i;
            let key = `${currYear}-${m.toString().padStart(2,'0')}-${d.toString().padStart(2,'0')}`;
            
            if(EVENTS_DB[key]) {
                 // Get the first event to determine box style
                 const mainEvent = EVENTS_DB[key][0];
                 if(mainEvent.team === 'alpha') el.classList.add('event-alpha');
                 else if(mainEvent.team === 'medicare') el.classList.add('event-medicare');
                 else if(mainEvent.team === 'holiday') el.classList.add('event-holiday');
                 
                 // Dots for multiple events
                 const dots = document.createElement('div');
                 dots.className = 'cal-dots';
                 EVENTS_DB[key].forEach(evt => {
                     let col = 'white'; // Dots white on colored bg
                     dots.innerHTML += `<div class="dot" style="background:${col}"></div>`;
                 });
                 el.appendChild(dots);
            }

            el.onclick = function() {
                document.querySelectorAll('.cal-date').forEach(d => {
                    d.style.borderColor = 'transparent'; 
                    d.style.boxShadow = 'none';
                });
                // Highlight selection
                this.style.borderColor = 'white';
                this.style.boxShadow = '0 0 15px rgba(255,255,255,0.4)';
                
                showEventDetails(key, i);
            }
            grid.appendChild(el);
        }
    }

    function changeMonth(dir) {
        currMonth += dir;
        if(currMonth < 0) { currMonth = 11; currYear--; }
        if(currMonth > 11) { currMonth = 0; currYear++; }
        renderCalendar();
    }

    function showEventDetails(key, day) {
        const container = document.getElementById('eventsContainer');
        const wrapper = document.getElementById('dateDetails');
        document.getElementById('selectedDateText').innerText = `${months[currMonth].substring(0,3)} ${day}`;
        wrapper.style.display = 'block';
        
        if(EVENTS_DB[key]) {
            container.innerHTML = '';
            EVENTS_DB[key].forEach(evt => {
                // Team Badge
                let teamBadge = '';
                let borderCol = 'var(--success)';
                if(evt.team === 'alpha') { teamBadge = 'Alpha Squad'; borderCol = 'var(--accent)'; }
                else if(evt.team === 'medicare') { teamBadge = 'Medicare'; borderCol = 'var(--accent-secondary)'; }
                else { teamBadge = 'Holiday'; borderCol = 'var(--success)'; }

                container.innerHTML += `
                    <div style="background:rgba(255,255,255,0.05); border-left:4px solid ${borderCol}; border-radius:8px; padding:12px; margin-bottom:8px; animation:slideInUp 0.3s ease;">
                        <div style="display:flex; justify-content:space-between; align-items:start;">
                            <div style="font-weight:700; color:white;">${evt.title}</div>
                            <span style="font-size:10px; background:rgba(255,255,255,0.1); padding:2px 6px; border-radius:4px;">${teamBadge}</span>
                        </div>
                        <div style="font-size:12px; color:var(--muted); margin-top:4px;">${evt.time} <span style="margin:0 4px">â€¢</span> ${evt.location}</div>
                        <div style="font-size:12px; color:rgba(255,255,255,0.4); margin-top:4px;">${evt.desc}</div>
                    </div>
                `;
            });
        } else {
            container.innerHTML = `<div style="color:var(--muted); font-size:13px; font-style:italic;">No events scheduled for this day.</div>`;
        }
    }

    // Init
    renderCalendar();

</script>
</body>
</html>